@{
    ViewData["Title"] = "Add Block Page";
}

<section class="container mt-5">
    <h1 class="text-center">@ViewData["Title"]</h1>

    <form method="post" asp-controller="Block" asp-action="CreateBlock" class="form">
        <div class="row">
            <div class="col-6">
                <div class="form-group">
                    <label for="Longueur">Longueur</label>
                    <input required value="1.0" type="text" class="form-control" id="Longueur" name="longueur" />
                </div>

                <div class="form-group">
                    <label for="largeur">Largeur</label>
                    <input required value="1.0" type="text" class="form-control" id="largeur" name="largeur" />
                </div>

                <div class="form-group">
                    <label for="hauteur">Hauteur</label>
                    <input required value="1.0" type="text" class="form-control" id="hauteur" name="h" />
                </div>
            </div>

            <div class="col-6">
                <div class="form-group">
                    <label for="Daty">Daty</label>
                    <input required type="date" class="form-control" id="Daty" name="Daty" />
                </div>

                <div class="form-group">
                    <label for="PrixRevient">Prix Revient</label>
                    <input required value="200" type="number" class="form-control" id="PrixRevient"
                        name="PrixRevient" />
                </div>
            </div>
        </div>

        <button type="submit" class="btn btn-success btn-block">Valider Block</button>
    </form>
</section>

<script>

    document.addEventListener( 'DOMContentLoaded', function () {
        const inputs = document.querySelectorAll( '.form-control' );

        inputs.forEach( input => {
            let timeoutId;

            input.addEventListener( 'input', function ( e ) {
                clearTimeout( timeoutId );

                // Délais de 2 secondes avant d'exécuter la fonction de validation
                timeoutId = setTimeout( () => {
                    validateInput( e.target );
                }, 2000 );
            } );
        } );

        function validateInput( inputElement ) {
            let value = inputElement.value;

            // Vérifie si la valeur est déjà valide
            if ( !isNaN( parseFloat( value ) ) && isFinite( value ) ) {
                inputElement.value = parseFloat( value ).toFixed( 2 );
            } else {
                inputElement.value = '';
            }
        }
    } );

</script>